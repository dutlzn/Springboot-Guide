<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/header.css"/>
		<style>
			html,
			body {
				height: 100%;
			}
			
			.mui-content {
				height: 100%;
				overflow: auto;
			}
			
			.red-point{
			  position: relative;
			}
	
			.red-point::before{
			  content: " ";
			  border: 5px solid #C9394A;/*设置红色*/
			  border-radius:5px;/*设置圆角*/
			  position: absolute;
			  z-index: 3000;
			  right: 0%;
			  margin-right: -10px;
			  margin-top: 0px;
			}
		</style>
	</head>

	<body>
		<div class="mui-content">
			<ul class="mui-table-view" id="ul_friend_request_list" style="margin-bottom: 10px;">
				<li class="mui-table-view-cell mui-media">
					<a href="javascript:;">
						<img class="mui-media-object mui-pull-left" src="./image/face-default-cat.png">
						<span id="span_nickname" class="mui-pull-right">
							<button friendId="1001" type="button"
							class="ignoreRequest mui-button mui-btn-grey"
							style="padding: 4px 10px;marigin-right:5px;">
								忽略
							</button>
							<button friendId="1001" type="button"
							class="passRequest mui-button mui-btn-danger"
							style="padding: 4px 10px;marigin-right:5px;">
								通过
							</button>
						</span>
						<div class="mui-media-body">
							<label class="mui-media-body">xxx</label>
							<p class="mui-ellipsis">请求添加你为好友</p>
						</div>
					</a>
				</li>
			</ul>
		</div>
		<script src="js/app.js"></script>
		<script src="js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init();
			mui.plusReady(function(){
				// 获取用户全局对象
				var user = app.getUserGlobalInfo();
				// 加载好友请求记录
				var thisWebview = plus.webview.currentWebview();
				thisWebview.addEventListener("show", function() {
					loadingFriendRequests();
				});
			});
			
			function loadingFriendRequests() {
				// 获取用户全局对象
				var user = app.getUserGlobalInfo();
				mui.ajax(app.serverUrl + "/u/queryFriendRequests?userId="+user.id,{
					data:{},
					dataType:'json',//服务器返回json格式数据
					type:'post',//HTTP请求类型
					timeout:10000,//超时时间设置为10秒；
					headers:{'Content-Type':'application/json'},	              
					success:function(data){
						if (data.status == 200) {
							console.log(JSON.stringify(data.data));
						} else {
							app.showToast(data.msg, "error");
						}
					}
				});
			}
		</script>
	</body>

</html>